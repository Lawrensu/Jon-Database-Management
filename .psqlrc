-- ============================================================================
-- PostgreSQL psql Configuration
-- Runs automatically when connecting via psql
-- ============================================================================

-- Turn OFF autocommit (safer for development)
\set AUTOCOMMIT off

\echo 'üîí AUTOCOMMIT is OFF - Use BEGIN/COMMIT/ROLLBACK explicitly'

-- Better display settings
\x auto
\pset null '(null)'
\pset border 2
\pset linestyle unicode

-- Timing queries (see how long queries take)
\timing on

-- Better error messages
\set VERBOSITY verbose

-- History settings
\set HISTSIZE 5000
\set HISTCONTROL ignoredups

-- Show current database and user in prompt
\set PROMPT1 '%n@%/%R%# '
\set PROMPT2 '%n@%/%R%# '

-- Helpful shortcuts
\set show_tables '\\dt app.*'
\set show_indexes '\\di app.*'

-- Custom queries (only if tables exist)
\set patient_count 'SELECT COUNT(*) FROM app.patient;'
\set active_prescriptions 'SELECT COUNT(*) FROM app.prescription WHERE status = ''Active'';'

-- ============================================================================
-- Welcome Message
-- ============================================================================
\echo ''
\echo '=========================================='
\echo 'üè• PAKAR Tech Healthcare Database'
\echo '=========================================='
\echo 'Database: jon_database_dev'
\echo 'Schema: app'
\echo ''
\echo 'üìå Useful Commands:'
\echo '  \\dt app.*           - List all tables'
\echo '  \\d app.patient      - Describe patient table'
\echo '  \\x                  - Toggle expanded display'
\echo '  \\timing             - Toggle query timing'
\echo '  \\q                  - Quit'
\echo ''
\echo '‚ö†Ô∏è  AUTOCOMMIT is OFF - Use BEGIN/COMMIT/ROLLBACK!'
\echo '=========================================='
\echo ''