{
  "name": "jon-database-management",
  "version": "1.0.0",
  "description": "Database Design Project (COS 20031) - PostgreSQL 18 Setup",
  "keywords": ["postgresql", "database", "university", "cos20031", "pakar-tech"],
  "author": "Jon's Team",
  "license": "MIT",
  "scripts": {
    "db:setup": "bash scripts/setup-database.sh",
    "db:start": "docker compose up -d",
    "db:summary": "docker compose exec postgres psql -U jondb_admin -d jon_database_dev -c \"SELECT 'Patients' AS type, COUNT(*) AS count FROM app.patient UNION ALL SELECT 'Doctors', COUNT(*) FROM app.doctor UNION ALL SELECT 'Admins', COUNT(*) FROM app.admin UNION ALL SELECT 'Audit Events', COUNT(*) FROM security.events_log;\"",
    "db:stop": "docker compose stop",
    "db:restart": "docker compose restart",
    "db:logs": "docker compose logs -f postgres",
    "db:connect": "docker compose exec postgres psql -U jondb_admin -d jon_database_dev",
    "db:reset": "docker compose down -v && echo Database reset! Run npm run db:start to restart",
    "db:status": "docker compose ps",
    "db:backup": "docker compose exec postgres pg_dump -U jondb_admin jon_database_dev > database/backups/backup_$(date +%Y%m%d_%H%M%S).sql",
    "pgadmin": "echo pgAdmin available at: http://localhost:8080",
    
    "sql:run": "docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev",
    
    "schema:create": "type database\\project\\01_core_schema.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev -a -e",
    "monitoring:enable": "type database\\project\\02_monitoring_triggers.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev -a -e",
    "schema:full": "npm run schema:create && npm run monitoring:enable",
    "schema:drop": "docker compose exec postgres psql -U jondb_admin -d jon_database_dev -c \"DROP SCHEMA IF EXISTS app CASCADE; CREATE SCHEMA app;\"",
    "schema:rebuild": "npm run schema:drop && npm run schema:create",
    
    "queries:validate": "type database\\queries\\00_validation_query.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev",
    "queries:validate:verbose": "type database\\queries\\00_validation_query.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev -a -e",
    "queries:test": "type database\\queries\\test_queries.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev",
    "queries:doctor": "type database\\queries\\01_doctor_query.sql | docker compose exec -T postgres psql -U jondb_admin -d  jon_database_dev",
    "queries:patient": "type database\\queries\\02_patient_query.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev",
    "queries:sideEffects": "type database\\queries\\03_sideEffect_query.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev",
    "queries:admin": "type database\\queries\\04_admin_query.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev",

    "functions:missed": "type database\\project\\03_auto_missed_trigger.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev",
    "functions:run-missed": "docker compose exec postgres psql -U jondb_admin -d jon_database_dev -c \"SELECT app.mark_missed_medications();\"",

    "encryption:full": "type database\\project\\04_encryption.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev",
    
    "seeds:test-users": "type database\\seeds\\03_test_users.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev",
    "seeds:prescriptions": "type database\\seeds\\04_prescriptions_seed.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev -a -e",
    "seeds:prescription-versions": "type database\\seeds\\05_prescription_versions_seed.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev -a -e",
    "seeds:medication-schedules": "type database\\seeds\\06_medication_schedules_seed.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev -a -e",
    "seeds:patient-symptoms": "type database\\seeds\\07_patient_symptoms_seed.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev -a -e",
    "seeds:medication-logs": "type database\\seeds\\08_medication_logs_seed.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev -a -e",
    "seeds:reminders": "type database\\seeds\\09_reminders_seed.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev -a -e",
    "seeds:run": "npm run seeds:reference && npm run seeds:patients && npm run seeds:doctors && npm run seeds:admins && npm run seeds:prescriptions && npm run seeds:prescription-versions && npm run seeds:medication-schedules && npm run seeds:patient-symptoms && npm run seeds:medication-logs && npm run seeds:reminders",


    "perf:baseline": "type database\\performance\\01_baseline_benchmark.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev -a -e",
    "perf:optimize": "type database\\performance\\02_advanced_indexes.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev -a -e",
    "perf:after": "type database\\performance\\03_after_benchmark.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev -a -e",
    "perf:report": "type database\\performance\\04_comparison_report.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev -a -e",
    "perf:demo": "type database\\performance\\05_demonstration.sql | docker compose exec -T postgres psql -U jondb_admin -d jon_database_dev",
    
    "migrate:up": "for file in database/migrations/*.sql; do type \"$file\" | npm run sql:run; done",
    
    "project:fresh": "npm run db:reset && npm run db:start && timeout /t 30 && npm run schema:full && npm run seeds:run",
    "project:check": "npm run db:status"
  }
}